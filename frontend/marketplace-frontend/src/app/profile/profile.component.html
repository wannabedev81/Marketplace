<h2>Profile</h2>
<nav>
    <a routerLink="view" routerLinkActive="active" *ngIf="profile">View Profile</a>
    <button mat-raised-button color="primary" routerLink="/profile/logout" routerLinkActive="active" *ngIf="profile">Logout</button>
    <button mat-button color="warn" *ngIf="profile" (click)="deleteProfile()">Delete profile</button>

    <button mat-button color="primary" routerLink="login" routerLinkActive="active" *ngIf="!profile">Login</button>
    <button mat-raised-button color="primary" routerLink="register" routerLinkActive="active" *ngIf="!profile">Register</button>
    
</nav>

<hr />

<router-outlet></router-outlet>

<!--List user items if there are any -->
<div *ngIf="profile">
    <h3>My Items</h3>

    <div *ngIf="isLoading">Loading your items..</div>

    <div *ngIf="!isLoading && userItems && userItems.length === 0">
        <p>You have yet no items on the marketplace.</p>
    </div>

    <div class="listing-grid" *ngIf="!isLoading && userItems && userItems.length > 0">
        <mat-card *ngFor="let item of userItems" class="dress-card">
            <img
            mat-card-image
            [src]="item.imageUrl ? apiBaseUrl + item.imageUrl : 'assets/placeholder.jpg'"
            [alt]="'Title ' + item.title"
            style="width: 100%; height: auto;"
            />
            <mat-card-content>
                <h3>{{ item.title }}</h3>
                <p>
                    {{ item.style || 'No style specified' }} |
                    Size: {{ item.size }} |
                    Location: {{ item.location || 'Unknown' }}
                </p>
                <p class="price">{{ item.price | currency }}</p>
            </mat-card-content>
            <mat-card-actions>
                <button mat-button color="primary">Edit</button>
                <button mat-button color="warn" (click)="deleteItem(item.id)">Delete</button>
            </mat-card-actions>
        </mat-card>
    </div>
</div>